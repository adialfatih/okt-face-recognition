<% layout('layout') -%>
    <div class="space-y-3">
        <div class="text-center">
            <div class="badge badge-lg">Rekam untuk NRP: <%= nrp %>
            </div>
        </div>
        <div class="relative">
            <video id="video" autoplay playsinline class="w-full rounded-box"></video>
            <canvas id="overlay" class="absolute inset-0"></canvas>
            <div class="absolute right-2 top-2 z-50">
                <button id="btnSwitchCam" class="btn btn-xs md:btn-sm">Ganti Kamera</button>
            </div>
        </div>
        <!-- <div class="text-center"><span id="counter" class="badge badge-info">0 / 15</span></div> -->
        <div class="flex items-center justify-center gap-3">
            <button id="btnRecStart" class="btn btn-primary">Mulai Rekam</button>
            <span id="counter" class="badge badge-info">0 / 15</span>
        </div>
        <div id="recStatus" class="text-center text-sm opacity-70 hidden">Menyimpan face recognitionâ€¦</div>
        <div id="recActions" class="flex items-center justify-center gap-2 hidden">
            <button id="btnSave" class="btn btn-success btn-sm" disabled>Simpan ke database</button>
            <button id="btnRedo" class="btn btn-warning btn-sm">Rekam ulang</button>
        </div>
        <div id="toastArea" class="fixed inset-x-0 top-4 flex justify-center z-50"></div>
    </div>
    <script defer src="/public/js/face-common.js"></script>
    <script defer>window.__NRP__ = '<%= nrp %>';</script>
    <script defer src="/public/js/rekam.js"></script>